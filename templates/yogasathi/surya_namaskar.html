{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yoga Sathi - AI Coach</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Poppins:wght@300;400&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
  </head>
  <body>
    <div class="main-container">
      <div class="main-content">
        <div id="webcamContainer" class="webcam-panel">
          <video id="webcam" autoplay playsinline></video>
          <canvas id="output_canvas"></canvas>
        </div>
        <div id="initialMessage" class="initial-message">
          <div class="logo">
            <h1 class="logo-icon">ðŸ§˜</h1>
            <h2 class="logo-text">Yoga Sathi</h2>
          </div>
          <p>Allow camera access to enter the experience.</p>
        </div>
      </div>

      <aside class="sidebar">
        <div id="referencePoseContainer" class="info-card">
          <h4 id="poseName" class="pose-title">Welcome</h4>
          <div class="reference-image-wrapper">
            <img
              id="referenceImage"
              src="{% static 'images/surya_namaskar/Surya_Namaskar.png' %}"
              alt="Reference Pose"
            />
          </div>
          <div class="pose-timer-wrapper">
            <i class="bi bi-hourglass-split"></i>
            <span id="poseTimer" class="pose-timer-text">Hold Pose</span>
          </div>
        </div>

        <div class="info-card">
          <h5 class="card-title">
            <i class="bi bi-cpu-fill"></i> AI Feedback Core
          </h5>
          <div id="feedbackBox" class="feedback-box" role="alert">
            Click 'Start' to begin.
          </div>
          <div class="accuracy-wrapper mt-2">
            <span>Pose Accuracy</span>
            <div class="progress-bar-container">
              <div id="accuracyBar" class="progress-bar"></div>
            </div>
          </div>
        </div>

        <div class="info-card stats-card">
          <div class="stat-item">
            <i class="bi bi-clock-history"></i>
            <span>Duration</span>
            <strong id="duration">0s</strong>
          </div>
          <div class="stat-item">
            <i class="bi bi-gem"></i>
            <span>Quality</span>
            <strong id="quality">--%</strong>
          </div>
        </div>

        <div class="controls mt-auto">
          <button id="startButton" class="btn btn-start">
            <i class="bi bi-play-fill"></i> Start Session
          </button>
          <button id="stopButton" class="btn btn-stop" disabled>
            <i class="bi bi-stop-fill"></i> Stop Session
          </button>
        </div>
      </aside>
    </div>
    <audio id="background-music" loop>
      <source
        src="{% static 'audio/background-music.mp3' %}"
        type="audio/mpeg"
      />
    </audio>

    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"
      crossorigin="anonymous"
    ></script>
    <script src="{% static 'js/main.js' %}"></script>
  </body>
</html>
